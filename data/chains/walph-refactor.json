{
  "id": "walph-refactor",
  "name": "Walph Refactor",
  "description": "Simple refactoring: analyze issues, apply fixes",
  "version": "1.0.0",
  "nodes": [
    {
      "id": "analyze",
      "type": "llm",
      "llm": {
        "model": "gemini",
        "prompt": "Analyze this code for refactoring:\n\n{{input.code}}\n\nIdentify: code smells, complexity, naming issues, SOLID violations.\n\nOutput JSON: {\"issues\": [{\"type\": \"...\", \"suggestion\": \"...\"}]}"
      },
      "output_key": "analysis"
    },
    {
      "id": "refactor",
      "type": "llm",
      "llm": {
        "model": "claude-cli",
        "prompt": "Apply refactoring:\n\n{{analysis}}\n\nOriginal:\n{{input.code}}\n\nOutput refactored code with comments."
      },
      "depends_on": ["analyze"],
      "output_key": "refactored_code"
    }
  ],
  "output": "refactor",
  "metadata": {
    "tags": ["walph", "refactor"],
    "estimated_duration_sec": 60
  }
}
