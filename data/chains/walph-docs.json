{
  "id": "walph-docs",
  "name": "Walph Docs",
  "description": "Documentation generation with quality feedback loop",
  "version": "1.1.0",
  "nodes": [
    {
      "id": "analyze",
      "type": "llm",
      "llm": {
        "model": "gemini",
        "prompt": "Analyze this code for documentation needs:\n\n{{input.code}}\n\nIdentify: public APIs, complex logic, missing docs, usage patterns.\n\nOutput JSON: {\"needs_docs\": [{\"name\": \"...\", \"type\": \"function|class|module\", \"complexity\": \"high|medium|low\"}]}"
      },
      "output_key": "analysis"
    },
    {
      "id": "docs_loop",
      "type": "feedback_loop",
      "generator": {
        "id": "generate",
        "type": "llm",
        "llm": {
          "model": "claude-cli",
          "prompt": "Generate documentation for:\n{{analysis}}\n\nCode:\n{{input.code}}\n\nOutput comprehensive JSDoc/docstrings with:\n- Description\n- Parameters with types\n- Return values\n- Usage examples"
        }
      },
      "evaluator_config": {
        "scoring_func": "llm_judge",
        "scoring_prompt": "Evaluate documentation quality:\n1. Complete coverage of public APIs?\n2. Clear descriptions?\n3. Accurate parameter/return types?\n4. Helpful examples?\n5. Follows project conventions?\n\nScore 0.0-1.0",
        "select_strategy": "best"
      },
      "improver_prompt": "Documentation scored {{score}}. Feedback:\n{{feedback}}\n\nImprove the documentation to address feedback.\nOutput improved docs only.",
      "max_iterations": 3,
      "score_threshold": 0.8,
      "score_operator": "gte",
      "depends_on": ["analyze"]
    }
  ],
  "output": "docs_loop",
  "metadata": {
    "tags": ["walph", "docs", "quality"],
    "estimated_duration_sec": 60
  }
}
