{
  "id": "walph-figma",
  "name": "Walph Figma",
  "description": "Figma to code with visual fidelity feedback loop",
  "version": "1.1.0",
  "nodes": [
    {
      "id": "extract",
      "type": "llm",
      "llm": {
        "model": "gemini",
        "prompt": "Extract design specs from Figma DSL:\n\n{{input.figma_dsl}}\n\nOutput JSON: {\"component\": \"...\", \"styles\": {\"colors\": [...], \"spacing\": [...], \"typography\": [...]}, \"layout\": \"flex|grid\", \"children\": [...]}"
      },
      "output_key": "design_spec"
    },
    {
      "id": "component_loop",
      "type": "feedback_loop",
      "generator": {
        "id": "generate",
        "type": "llm",
        "llm": {
          "model": "claude-cli",
          "prompt": "Generate React component from design spec:\n{{design_spec}}\n\nRequirements:\n- TypeScript with proper types\n- Tailwind CSS for styling\n- Match exact colors, spacing, typography\n- Responsive where appropriate\n\nOutput clean component code."
        }
      },
      "evaluator_config": {
        "scoring_func": "llm_judge",
        "scoring_prompt": "Evaluate UI component quality:\n1. Matches design spec exactly?\n2. Correct colors/spacing/typography?\n3. Clean TypeScript types?\n4. Proper Tailwind usage?\n5. Accessible (aria labels, semantic HTML)?\n\nScore 0.0-1.0",
        "select_strategy": "best"
      },
      "improver_prompt": "Component scored {{score}}. Feedback:\n{{feedback}}\n\nImprove the component to better match the design spec.\nOutput improved code only.",
      "max_iterations": 3,
      "score_threshold": 0.85,
      "score_operator": "gte",
      "depends_on": ["extract"]
    }
  ],
  "output": "component_loop",
  "metadata": {
    "tags": ["walph", "figma", "ui", "quality"],
    "estimated_duration_sec": 90
  }
}
