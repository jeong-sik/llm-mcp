{
  "id": "design_to_tasks",
  "config": {
    "timeout": 600,
    "max_concurrency": 1,
    "trace": true
  },
  "nodes": [
    {
      "id": "fetch_design",
      "type": "tool",
      "name": "figma.get_node_summary",
      "args": {
        "node_id": "{{input.node_id}}",
        "max_children": 50
      }
    },
    {
      "id": "plan_tasks",
      "type": "llm",
      "model": "gemini",
      "prompt": "Analyze this Figma node summary and break it down into implementation tasks for MASC.\n\nFigma Summary:\n{{fetch_design.output}}\n\nOutput ONLY a valid JSON array of task objects with these fields:\n- title: string\n- priority: integer (1-5, 1=highest)\n- description: string (detailed implementation steps)\n\nExample:\n[{\"title\": \"Implement Header\", \"priority\": 2, \"description\": \"...\"}]"
    },
    {
      "id": "execute_batch",
      "type": "tool",
      "name": "masc.batch_add_tasks",
      "args": {
        "tasks": "{{plan_tasks.output}}"
      }
    }
  ],
  "output": "execute_batch"
}